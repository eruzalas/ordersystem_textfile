<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Gourmet Guru Order Form">
        <link rel="stylesheet" href="styles/style.css">
    </head>
    <body>
        <p id="output">testing</p>
        <script type="text/javascript">

            function readTextFile() { 
                fetch("items.txt")
                    .then(r=>r.text())
                    .then(text => {
                        const lines = text.split("\n");
                        document.getElementById("output").textContent = lines.join("\n");
                    })
                    .catch(error => {
                        console.error('Error fetching the text file:', error);
                    })
            }


            readTextFile();

            /*
            var items_mapped;
            var email_arr;
            var updating_arr;

            function calculate_total($items) {
                //document.getElementById('testing').innerHTML = count;
                disable_submit();
                var input_read = document.getElementsByName('amount_arr[]');
                var k = [];
                var index_position_discovery = [];
                var found = false;
                var true_false = [];
                var roll_count = [];
                var sushi_count = [];

                var final_arr = [];

                var i = 0;

                while (i < input_read.length) {
                    var a = input_read[i].value;
                    k.push(a);
                    index_position_discovery.push(i);
                    i += 1;
                }

                var items = <?php echo json_encode($items); ?>;
                var indiv_cost = 0;

                var j = 0;

                while (j < input_read.length) {
                    indiv_cost = items[index_position_discovery[j]][1];
                    items[index_position_discovery[j]][2] = indiv_cost * k[j];
                    if (items[index_position_discovery[j]][2] > 0) {
                        document.getElementById('total_costs' + index_position_discovery[j]).innerHTML = "&#36;" + items[index_position_discovery[j]][2].toFixed(2);
                    }
                    else {
                        document.getElementById('total_costs' + j).innerHTML = "";
                    }

                    var item_limit = parseInt(items[index_position_discovery[j]][3]);

                    var item_limit_rs = items[index_position_discovery[j]][3];

                    var count_holder;

                    if (k[j] > 0) {
                        if (item_limit != 0) {
                            if (item_limit_rs.includes("c")) {
                                if (item_limit_rs == "40c") {
                                    roll_count.push([k[j], index_position_discovery[j]]);
                                    count_holder = roll_count;
                                    var value_correct = "r";
                                    var value_incorrect = "h";
                                }
                                else if (item_limit_rs == "15c") {
                                    sushi_count.push([k[j], index_position_discovery[j]]);
                                    count_holder = sushi_count;
                                    var value_correct = "s";
                                    var value_incorrect = "y";
                                }

                                var total = 0;
                                for (var c = 0, n = count_holder.length; c < n; c++) {
                                    total += parseInt(count_holder[c][0]);
                                }

                                var n = count_holder.length;
                                var c = 0;

                                if (total > (item_limit - 1)) {
                                    while (c < n) {
                                        document.getElementById('total_costs' + count_holder[c][1]).style.backgroundColor = "lightgreen";
                                        true_false.push(value_correct);
                                        final_arr.push([k[j], index_position_discovery[j]]);
                                        c += 1;
                                    }
                                }
                                else {
                                    while (c < n) {
                                        document.getElementById('total_costs' + count_holder[c][1]).style.backgroundColor = "lightcoral";
                                        true_false.push(value_incorrect);
                                        c += 1;
                                    }
                                }
                            }
                            else if (item_limit > k[j]) {
                                document.getElementById('total_costs' + index_position_discovery[j]).style.backgroundColor = "lightcoral";
                                true_false.push("f");
                            }
                            else {
                                document.getElementById('total_costs' + index_position_discovery[j]).style.backgroundColor = "lightgreen";
                                final_arr.push([k[j], index_position_discovery[j]]);
                                true_false.push("t");
                            }
                        }
                        else {
                            document.getElementById('total_costs' + index_position_discovery[j]).style.backgroundColor = "lightgreen";
                            final_arr.push([k[j], index_position_discovery[j]]);
                            true_false.push("t");
                        }
                    }
                    else if (k[j] == "") {
                        document.getElementById('total_costs' + index_position_discovery[j]).style.backgroundColor = "transparent";
                    }
                    j += 1;
                }

                let total_cost = 0;

                final_arr.forEach(cost_calculation);

                function cost_calculation(cost) {
                    total_cost += cost[1];
                }

                document.getElementById('testing').innerHTML = k;
                document.getElementById('id').innerHTML = index_position_discovery;
                document.getElementById('two').innerHTML = final_arr;

                
                document.getElementById('total_cost').innerHTML = total_cost;

                items_mapped = true_false;
                email_arr = final_arr;
                updating_arr = items;
            }

            function disable_submit() {
                submit.disabled = true;
                let element = document.getElementById("submit");
                element.className = "unable";
            }

            function get_verify() {
                create_email();
                index = 0;
                count = items_mapped.length;
                while (index < count) {
                    if (items_mapped.includes("f")) {
                        submit.disabled = true;
                        let element = document.getElementById("submit");
                        element.className = "unable";
                    }
                    else {
                        submit.disabled = false;
                        let element = document.getElementById("submit");
                        element.className = "button button1";
                    }

                    if (items_mapped.includes("h") && items_mapped.includes("r") == false) {
                        submit.disabled = true;
                        let element = document.getElementById("submit");
                        element.className = "unable";
                    }

                    if (items_mapped.includes("y") && items_mapped.includes("s") == false) {
                        submit.disabled = true;
                        let element = document.getElementById("submit");
                        element.className = "unable";
                    }
                    index += 1;
                }
            }

            function create_email() {
                var email;
                var order_item = "";
                index = 0;
                count = email_arr.length;
                while (index < count) {
                    order_item = order_item + email_arr[index][0] + " x " + updating_arr[email_arr[index][1]][0] + "\r\n&#36;" + updating_arr[email_arr[index][1]][2] + " (&#36;" + updating_arr[email_arr[index][1]][1].trim() + " each)\r\n\r\n";
                    index += 1;
                }
                
                document.getElementById('one').innerHTML = order_item;
            }*/
        </script>

        <button onclick="readTextFile"></button>

        <p id="record">hehe</p>
        <p id="testing">hehe</p>
        <p id="diff">hehe</p>
        <p id="id">hehe</p>

        <pre id="one"></pre>
        <p id="two"></p>
    </body>
</html>